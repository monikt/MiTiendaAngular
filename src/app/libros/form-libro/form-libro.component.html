<div *ngIf="formulario">
  <h1>{{ libro ? 'Editar' : 'Nuevo' }} libro</h1>

  <div class="mt-5 alert alert-danger" *ngIf="errors">
      {{ errors | json }}
  </div>

  <form class="mt-5" [formGroup]="formulario" autocomplete="off" (ngSubmit)="guardar()">

      <div class="mb-2">
          <label for="title">Título</label>
          <input id="title" type="text" placeholder="Título" class="form-control" formControlName="titulo">
          <div class="invalid-feedback">
              <ng-container *ngIf="controlTieneError('titulo', 'required')">
                  Este campo es obligatorio
              </ng-container>
              <ng-container *ngIf="controlTieneError('titulo', 'minlength')">
                  Debe tener al menos 3 caracteres
              </ng-container>
              <ng-container *ngIf="controlTieneError('titulo', 'maxlength')">
                  Debe tener 100 caracteres como máximo
              </ng-container>
          </div>
      </div>

      <div class="mb-2">
          <label for="slug">Slug</label>
          <input id="slug" type="text" placeholder="Slug" class="form-control" formControlName="slug">
          <div class="invalid-feedback">
              <ng-container *ngIf="controlTieneError('slug', 'required')">
                  Este campo es obligatorio
              </ng-container>
              <ng-container *ngIf="controlTieneError('slug', 'pattern')">
                  El valor es inválido
              </ng-container>
          </div>
      </div>

      <div class="mb-2">
          <label for="descripcion">Descripción</label>
          <textarea id="descripcion" placeholder="Descripción" class="form-control" formControlName="descripcion"></textarea>
          <div class="invalid-feedback">
              <ng-container *ngIf="controlTieneError('descripcion', 'required')">
                  Este campo es obligatorio
              </ng-container>
          </div>
      </div>

      <div class="mb-2">
          <label for="precio">Precio</label>
          <input id="precio" type="number" step="0.01" placeholder="Precio" class="form-control" formControlName="precio">
          <div class="invalid-feedback">
              <ng-container *ngIf="controlTieneError('precio', 'required')">
                  Este campo es obligatorio
              </ng-container>
              <ng-container *ngIf="controlTieneError('precio', 'min')">
                  El valor debe ser 0 como mínimo
              </ng-container>
          </div>
      </div>

      <div class="text-end mt-5">
          <button class="btn btn-light" type="button" routerLink="/libros">
              Cancelar
          </button>
          <button class="btn btn-primary ms-2">
              {{ libro ? 'Actualizar' : 'Crear' }} libro
          </button>
      </div>
  </form>
</div>
